# 贪心算法

## 活动选择问题

假定有一个$n$个活动的集合$S=\{a_1,a_2,...,a_n\}$，这些活动使用同一个资源，这个资源某个时刻只能供一个活动使用。每个活动$a_i$都有一个开始时间$s_j$和一个结束时间$f_i$，其中，$0\le s_i < f_i < \infin$。某个任务$a_i$被选中，则任务发生在区间$[s_i,f_i)$期间。如果两个活动的发生区间不重叠，则称这两个活动是兼容的。

活动选择问题，即在活动集合中选出一个最大兼容活动集。

## 活动选择问题的最优子结构性质

令$S_{ij}$表示在$a_i$结束之后开始，在$a_j$之前结束的活动的集合。假定$A_{ij}$是$S_{ij}$的一个最大兼容活动集，包含活动$a_k$。令$A_{ik}=A_{ij}\cap S_{ik}$和$A_{kj}=A_{ij}\cap S_{kj}$，即$A_{ik}$表示$S_{ij}$中那些在$a_{k}$开始之前的活动，$A_{kj}$表示$S_{ij}$中那些在$a_{k}$结束之后的活动。因此，$A_{ij}=A_{ik}\cup \{a_k\} \cup A_{kj}$，$|A_{ij}|=|A_{ik}| + 1 + |A_{kj}|$。

现在证明$S_{ij}$的最优解必然包含两个子问题$S_{ik}$和$S_{kj}$的最优解。

假设子问题$S_{ik}$存在一个最优解$A'_{ik}$，满足$|A'_{ik}|>|A_{ik}|$，则可以用$A'_{ik}$替换$A_{ik}$作为$S_{ij}$的最优解一部分，则得到$|S_{ij}|>|A_{ij}|$，这与$A_{ij}$是$S_{ij}$的最大兼容活动集的假设矛盾。

## 活动选择问题的动态规划解法

用$c[i,j]$表示$S_{ij}$的最优解的大小，则可得递归式：

$$c[i,j]=c[i,k]+c[k,j]+1$$

我们并不知道$S_{ij}$的最优解包含活动$a_{k}$，因此需要考察$S_{ij}$中的所有活动，即：

$$c[i,j]=\begin{cases}0 &S_{ij}=\empty\\\underset{a\in S_{ij}}{\max}\{c[i,k]+c[k,j]+1\} &S_{ij}\ne \empty\end{cases}$$

## 活动选择问题的贪心选择

活动选择问题的贪心选择，即选出一个活动之后，它剩下的资源应该能被尽量多的其它任务所用。

选第一个活动时，如果找出最早结束的活动，则可以满足这个目标（因为任何其它活动都不可能比这个活动早结束）。选第二个活动的时候，仍然可以按照同样的思路进行。