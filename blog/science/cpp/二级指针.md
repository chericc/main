# 二级指针(pointer to pointer)

## 从二维数组开始

```c
int vec[2][3] = {
    1,2,3,
    4,5,6,
};
```

这里语义上看作 `int (vec[2]) [3]`，即`vec`是一个具有2个元素的数组，数组的元素类型为`int [3]`。

因此`vec[0]`表示的是数组中的第一个元素，即一个`int [3]`数组。

## 回到二级指针

```c
int a = 0;
int *pa = &a;
int **ppa = &pa;
```

对于一级指针，其运算规则决定，可以把一级指针按数组名使用来访问数组中的元素。也即`pa[1]`等价于`*(pa+1)`都是表示数组中的第一个元素。

对于二级指针，语义上同样可以理解为`(int*)(*ppa)`，即`ppa`是一个指向`int*`类型的指针。也即`ppa`可以作为一个`int*`类型的数组来访问元素。

因此`ppa[1]`等价于`*(ppa + 1)`，实际偏移为`sizeof(int*)`。

## 构造一个可以访问的二级指针

把二级指针看作二维数组时，其元素是一个一级指针（也即可以看作一维数组），因此要构造一个二级指针，就要构造一个二维数组。

例如，要构造一个`struct type** p`，一个方式如下：

```c
struct type t[6];
struct type *pt[2] = { &t[0], &t[1], &t[2], &t[3], &t[4], &t[5] };
struct type **p = pt;
```

另外一个例子是命令行参数列表：

```c
const char *p1 = "arg1";
const char *p2 = "arg2";
const char *parg[] = { p1, p2 };
const char **pp = parg;
```