现代密码学

## 1. 数据加密

### 1.1 对称加密

- 原理：加密和解密使用同一个密钥。
- 特点：加解密速度快，适合加密大量数据。
- 挑战：密钥分发问题。如何安全地将密钥传递给通信双方。

### 1.2 非对称加密

- 原理：使用一对密钥，公钥和私钥。公钥可以公开，私钥必须保密。用公钥加密的内容只有对应的私钥才能解密。
- 特点：解决了密钥分发问题，但计算速度较慢。
- 挑战：需要确保公钥的真实性，这引出了数字证书的概念。

### 1.3 比较

对于对称加密，如果通信双方提前就能获得共同的密钥，那么双方就能加密通信。身份认证在分发密钥时就已经保证了（即，传递密钥时，同时确认了身份。拥有密钥的人就是认证了的人）。

对于非对称加密，其特点是可以通过公共渠道将公钥传递给对方，解决对称加密密钥传递的问题。此时就剩余身份认证的问题了。

## 加密算法

### AES

AES为常用的对称加密算法。

### RSA

基于大数分解的难度，是最早的非对称加密算法之一。可以同时用于密钥交换、数据加密、数字签名。

RSA生成的公钥可以理解为一把打开的锁。私钥就是开锁的钥匙。 A将数据用这把打开的锁锁住，发给B，B用持有的私钥打开锁拿到数据。

- 公钥加密数据后，私钥可以解密数据。

- 私钥对数据生成签名后，公钥可以验证签名。

均基于数学上的陷阱们函数：正向计算很容易；反向计算极其困难。反向计算时如果知道一些关键信息，则很容易。

### Diffie-Hellman（DH）密钥交换

不直接加密数据，而是让双方在不安全的通道上协商出一个共享密钥。DH算法的优势是前向保密性。

公开约定一个基础颜色，各自秘密选择一种颜色（私钥）。将基础颜色与私有颜色混合后交换，交换后再与自己的颜色混合一次。此时双方得到相同的最终颜色。但是旁观者无法从中间色推断出双方的秘密颜色。

## 2. 身份认证

### 2.1 数字签名

数字签名即对一段数据利用私钥给出签名，使用者使用公钥验证这个签名和数据一致。签名只能由私钥持有者签发，因此如果数据能使用签名验证，则这个数据一定来自私钥持有者。

签名实际上是使用私钥，对数据的哈希值进行加密运算。

### 2.2 身份认证

#### 2.2.3 RSA实现

在已知某个公钥属于某个所有者的情况下，验证对方的身份。

比如，服务端实现具有某个用户的公钥。如果要确认对端是这个用户，只需要确认其具有对应的私钥即可。方法是，服务端生成一段随机数据，使用公钥加密，然后发送给对端解密，如果解密后的数据和原始数据一致，则验证成功。

#### 2.2.4 零知识证明

允许一方向另一方证明自己知道某个秘密，而无需透露这个秘密。

例子：阿里巴巴洞穴。环形洞穴有两个出口，两个出口间有一扇需要密码才能打开的门。A向B证明自己知道密码，过程是：A进入洞穴后，B给出随机的洞口要求A从这个洞口出来。如果多次A都能满足要求，则可以证明A知道这个密码。

零知识证明验证身份的原理：略。

## 3. 密码哈希函数

将任意长度的数据映射为固定长度的、唯一的指纹（哈希值）。这个过程是单向的，即无法从哈希值反推出原始数据。

特性：抗碰撞性。很难找到两个不同的输入产生相同的哈希值。

应用：

- 密码存储。不存储密码，而是存储密码的哈希值。这样，很容易验证待验证密码是否和已存储密码是否有相同的哈希值，但是根据已有的哈希值无法推断出原始密码。
- 数据完整性校验。如果数据的哈希值发生了改变，则数据也发生了改变。

## 4. 常用技术和算法总结

### 4.1 TLS/SSL

#### 4.1.1 RSA

基于公钥和私钥的非对称加密算法。新版本的TLS协议中，RSA算法主要用来身份认证。

#### 4.1.2 ECDHE

是Elliptic Curve Diffie-Hellman Ephemeral的缩写，表示椭圆曲线迪菲-赫尔曼临时密钥交换，是对DH密钥交换的更高效、更安全的实现。

#### 4.1.3 AES

现代的对称加密算法。

### 4.2 身份认证

#### 4.2.1 RSA

做数字签名。

#### 4.2.2 ECDSA

一种基于椭圆曲线密码学的数字签名算法。相比传统的RSA，其在相同的安全强度下可以使用更短的密钥。

### 4.3 完整性验证

#### 4.3.1 HMAC

是Hash-based Message Authentication Code的缩写，表示基于哈希的消息认证码。是一种用于消息认证的加密算法，结合加密哈希函数（如SHA-256）和一个密钥，用来验证数据的完整性和真实性。

#### 4.3.2 哈希函数（SHA-256）

一种

### 4.4 密码存储

#### 4.4.1 Bcrypt



#### 4.4.2 Argon2